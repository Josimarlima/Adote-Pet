{"ast":null,"code":"import api from'../../../utils/api';import{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import styles from'./PetDetails.module.css';/* hooks */import useFlashMessage from'../../../hooks/useFlashMessage';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function PetDetails(){const[pet,setPet]=useState({});const{id}=useParams();const{setFlashMessage}=useFlashMessage();const[token]=useState(localStorage.getItem('token')||'');useEffect(()=>{api.get(\"/pets/\".concat(id)).then(response=>{setPet(response.data.pet);});},[id]);async function schedule(){let msgType='success';const data=await api.patch(\"pets/schedule/\".concat(pet._id),{headers:{Authorization:\"Bearer \".concat(JSON.parse(token))}}).then(response=>{console.log(response.data);return response.data;}).catch(err=>{console.log(err);msgType='error';return err.response.data;});setFlashMessage(data.message,msgType);}return/*#__PURE__*/_jsx(_Fragment,{children:pet.name&&/*#__PURE__*/_jsxs(\"section\",{className:styles.pet_details_container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.petdetails_header,children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Conhecendo o Pet: \",pet.name]}),/*#__PURE__*/_jsx(\"p\",{children:\"Se tiver interesse, marque uma visita para conhec\\xEA-lo!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.pet_images,children:pet.images.map((image,index)=>/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API,\"/images/pets/\").concat(image),alt:pet.name},index))}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"bold\",children:\"Peso:\"}),\" \",pet.weight,\"kg\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"bold\",children:\"Idade:\"}),\" \",pet.age,\" anos\"]}),token?/*#__PURE__*/_jsx(\"button\",{onClick:schedule,children:\"Solicitar uma Visita\"}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Voc\\xEA precisa \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"criar uma conta\"}),\" para solicitar a visita.\"]})]})});}export default PetDetails;","map":{"version":3,"names":["api","useState","useEffect","useParams","Link","styles","useFlashMessage","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","PetDetails","pet","setPet","id","setFlashMessage","token","localStorage","getItem","get","concat","then","response","data","schedule","msgType","patch","_id","headers","Authorization","JSON","parse","console","log","catch","err","message","children","name","className","pet_details_container","petdetails_header","pet_images","images","map","image","index","src","process","env","REACT_APP_API","alt","weight","age","onClick","to"],"sources":["D:/Projetos/Node/15_GETAPET/frontend/src/components/pages/Pet/PetDetails.js"],"sourcesContent":["import api from '../../../utils/api'\n\nimport { useState, useEffect } from 'react'\nimport { useParams, Link } from 'react-router-dom'\n\nimport styles from './PetDetails.module.css'\n\n/* hooks */\nimport useFlashMessage from '../../../hooks/useFlashMessage'\n\nfunction PetDetails() {\n  const [pet, setPet] = useState({})\n  const { id } = useParams()\n  const { setFlashMessage } = useFlashMessage()\n  const [token] = useState(localStorage.getItem('token') || '')\n\n  useEffect(() => {\n    api.get(`/pets/${id}`).then((response) => {\n      setPet(response.data.pet)\n    })\n  }, [id])\n\n  async function schedule() {\n    let msgType = 'success'\n\n    const data = await api\n      .patch(`pets/schedule/${pet._id}`, {\n        headers: {\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n      })\n      .then((response) => {\n        console.log(response.data)\n        return response.data\n      })\n      .catch((err) => {\n        console.log(err)\n        msgType = 'error'\n        return err.response.data\n      })\n\n    setFlashMessage(data.message, msgType)\n  }\n\n  return (\n    <>\n      {pet.name && (\n        <section className={styles.pet_details_container}>\n          <div className={styles.petdetails_header}>\n            <h1>Conhecendo o Pet: {pet.name}</h1>\n            <p>Se tiver interesse, marque uma visita para conhecê-lo!</p>\n          </div>\n          <div className={styles.pet_images}>\n            {pet.images.map((image, index) => (\n              <img\n                key={index}\n                src={`${process.env.REACT_APP_API}/images/pets/${image}`}\n                alt={pet.name}\n              />\n            ))}\n          </div>\n          <p>\n            <span className=\"bold\">Peso:</span> {pet.weight}kg\n          </p>\n          <p>\n            <span className=\"bold\">Idade:</span> {pet.age} anos\n          </p>\n          {token ? (\n            <button onClick={schedule}>Solicitar uma Visita</button>\n          ) : (\n            <p>\n              Você precisa <Link to=\"/register\">criar uma conta</Link> para\n              solicitar a visita.\n            </p>\n          )}\n        </section>\n      )}\n    </>\n  )\n}\n\nexport default PetDetails\n"],"mappings":"AAAA,MAAO,CAAAA,GAAG,KAAM,oBAAoB,CAEpC,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,SAAS,CAAEC,IAAI,KAAQ,kBAAkB,CAElD,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAE5C,WACA,MAAO,CAAAC,eAAe,KAAM,gCAAgC,QAAAC,IAAA,IAAAC,KAAA,gCAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE5D,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,KAAM,CAACC,GAAG,CAAEC,MAAM,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC,CAClC,KAAM,CAAEe,EAAG,CAAC,CAAGb,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAEc,eAAgB,CAAC,CAAGX,eAAe,CAAC,CAAC,CAC7C,KAAM,CAACY,KAAK,CAAC,CAAGjB,QAAQ,CAACkB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAI,EAAE,CAAC,CAE7DlB,SAAS,CAAC,IAAM,CACdF,GAAG,CAACqB,GAAG,UAAAC,MAAA,CAAUN,EAAE,CAAE,CAAC,CAACO,IAAI,CAAEC,QAAQ,EAAK,CACxCT,MAAM,CAACS,QAAQ,CAACC,IAAI,CAACX,GAAG,CAAC,CAC3B,CAAC,CAAC,CACJ,CAAC,CAAE,CAACE,EAAE,CAAC,CAAC,CAER,cAAe,CAAAU,QAAQA,CAAA,CAAG,CACxB,GAAI,CAAAC,OAAO,CAAG,SAAS,CAEvB,KAAM,CAAAF,IAAI,CAAG,KAAM,CAAAzB,GAAG,CACnB4B,KAAK,kBAAAN,MAAA,CAAkBR,GAAG,CAACe,GAAG,EAAI,CACjCC,OAAO,CAAE,CACPC,aAAa,WAAAT,MAAA,CAAYU,IAAI,CAACC,KAAK,CAACf,KAAK,CAAC,CAC5C,CACF,CAAC,CAAC,CACDK,IAAI,CAAEC,QAAQ,EAAK,CAClBU,OAAO,CAACC,GAAG,CAACX,QAAQ,CAACC,IAAI,CAAC,CAC1B,MAAO,CAAAD,QAAQ,CAACC,IAAI,CACtB,CAAC,CAAC,CACDW,KAAK,CAAEC,GAAG,EAAK,CACdH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC,CAChBV,OAAO,CAAG,OAAO,CACjB,MAAO,CAAAU,GAAG,CAACb,QAAQ,CAACC,IAAI,CAC1B,CAAC,CAAC,CAEJR,eAAe,CAACQ,IAAI,CAACa,OAAO,CAAEX,OAAO,CAAC,CACxC,CAEA,mBACEjB,IAAA,CAAAE,SAAA,EAAA2B,QAAA,CACGzB,GAAG,CAAC0B,IAAI,eACPhC,KAAA,YAASiC,SAAS,CAAEpC,MAAM,CAACqC,qBAAsB,CAAAH,QAAA,eAC/C/B,KAAA,QAAKiC,SAAS,CAAEpC,MAAM,CAACsC,iBAAkB,CAAAJ,QAAA,eACvC/B,KAAA,OAAA+B,QAAA,EAAI,oBAAkB,CAACzB,GAAG,CAAC0B,IAAI,EAAK,CAAC,cACrC9B,IAAA,MAAA6B,QAAA,CAAG,2DAAsD,CAAG,CAAC,EAC1D,CAAC,cACN7B,IAAA,QAAK+B,SAAS,CAAEpC,MAAM,CAACuC,UAAW,CAAAL,QAAA,CAC/BzB,GAAG,CAAC+B,MAAM,CAACC,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBAC3BtC,IAAA,QAEEuC,GAAG,IAAA3B,MAAA,CAAK4B,OAAO,CAACC,GAAG,CAACC,aAAa,kBAAA9B,MAAA,CAAgByB,KAAK,CAAG,CACzDM,GAAG,CAAEvC,GAAG,CAAC0B,IAAK,EAFTQ,KAGN,CACF,CAAC,CACC,CAAC,cACNxC,KAAA,MAAA+B,QAAA,eACE7B,IAAA,SAAM+B,SAAS,CAAC,MAAM,CAAAF,QAAA,CAAC,OAAK,CAAM,CAAC,IAAC,CAACzB,GAAG,CAACwC,MAAM,CAAC,IAClD,EAAG,CAAC,cACJ9C,KAAA,MAAA+B,QAAA,eACE7B,IAAA,SAAM+B,SAAS,CAAC,MAAM,CAAAF,QAAA,CAAC,QAAM,CAAM,CAAC,IAAC,CAACzB,GAAG,CAACyC,GAAG,CAAC,OAChD,EAAG,CAAC,CACHrC,KAAK,cACJR,IAAA,WAAQ8C,OAAO,CAAE9B,QAAS,CAAAa,QAAA,CAAC,sBAAoB,CAAQ,CAAC,cAExD/B,KAAA,MAAA+B,QAAA,EAAG,kBACY,cAAA7B,IAAA,CAACN,IAAI,EAACqD,EAAE,CAAC,WAAW,CAAAlB,QAAA,CAAC,iBAAe,CAAM,CAAC,4BAE1D,EAAG,CACJ,EACM,CACV,CACD,CAAC,CAEP,CAEA,cAAe,CAAA1B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}