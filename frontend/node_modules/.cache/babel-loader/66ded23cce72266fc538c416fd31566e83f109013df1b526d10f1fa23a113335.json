{"ast":null,"code":"import api from'../../../utils/api';import{useState}from'react';import{useHistory}from'react-router-dom';import styles from'./AddPet.module.css';import PetForm from'../../form/PetForm';/* hooks */import useFlashMessage from'../../../hooks/useFlashMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddPet(){const[token]=useState(localStorage.getItem('token')||'');const{setFlashMessage}=useFlashMessage();const history=useHistory();async function registerPet(pet){let msgType='success';const formData=new FormData();const petFormData=await Object.keys(pet).forEach(key=>{if(key==='images'){for(let i=0;i<pet[key].length;i++){formData.append(\"images\",pet[key][i]);}}else{formData.append(key,pet[key]);}});formData.append('pet',petFormData);const data=await api.post(\"pets/create\",formData,{headers:{Authorization:\"Bearer \".concat(JSON.parse(token)),'Content-Type':'multipart/form-data'}}).then(response=>{console.log(response.data);return response.data;}).catch(err=>{console.log(err);msgType='error';return err.response.data;});setFlashMessage(data.message,msgType);history.push('/pet/mypets');}return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.addpet_header,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Cadastre um Pet\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Depois ele ficar\\xE1 dispon\\xEDvel para ado\\xE7\\xE3o\"})]}),/*#__PURE__*/_jsx(PetForm,{handleSubmit:registerPet,btnText:\"Cadastrar\"})]});}export default AddPet;","map":{"version":3,"names":["api","useState","useHistory","styles","PetForm","useFlashMessage","jsx","_jsx","jsxs","_jsxs","AddPet","token","localStorage","getItem","setFlashMessage","history","registerPet","pet","msgType","formData","FormData","petFormData","Object","keys","forEach","key","i","length","append","data","post","headers","Authorization","concat","JSON","parse","then","response","console","log","catch","err","message","push","children","className","addpet_header","handleSubmit","btnText"],"sources":["D:/Projetos/Node/15_GETAPET/frontend/src/components/pages/Pet/AddPet.js"],"sourcesContent":["import api from '../../../utils/api'\n\nimport { useState } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport styles from './AddPet.module.css'\n\nimport PetForm from '../../form/PetForm'\n\n/* hooks */\nimport useFlashMessage from '../../../hooks/useFlashMessage'\n\nfunction AddPet() {\n  const [token] = useState(localStorage.getItem('token') || '')\n  const { setFlashMessage } = useFlashMessage()\n  const history = useHistory()\n\n  async function registerPet(pet) {\n    let msgType = 'success'\n\n    const formData = new FormData()\n\n    const petFormData = await Object.keys(pet).forEach((key) => {\n      if (key === 'images') {\n        for (let i = 0; i < pet[key].length; i++) {\n          formData.append(`images`, pet[key][i])\n        }\n      } else {\n        formData.append(key, pet[key])\n      }\n    })\n\n    formData.append('pet', petFormData)\n\n    const data = await api\n      .post(`pets/create`, formData, {\n        headers: {\n          Authorization: `Bearer ${JSON.parse(token)}`,\n          'Content-Type': 'multipart/form-data',\n        },\n      })\n      .then((response) => {\n        console.log(response.data)\n        return response.data\n      })\n      .catch((err) => {\n        console.log(err)\n        msgType = 'error'\n        return err.response.data\n      })\n\n    setFlashMessage(data.message, msgType)\n    history.push('/pet/mypets')\n  }\n\n  return (\n    <section>\n      <div className={styles.addpet_header}>\n        <h1>Cadastre um Pet</h1>\n        <p>Depois ele ficará disponível para adoção</p>\n      </div>\n      <PetForm handleSubmit={registerPet} btnText=\"Cadastrar\" />\n    </section>\n  )\n}\n\nexport default AddPet\n"],"mappings":"AAAA,MAAO,CAAAA,GAAG,KAAM,oBAAoB,CAEpC,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,UAAU,KAAQ,kBAAkB,CAE7C,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CAExC,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CAExC,WACA,MAAO,CAAAC,eAAe,KAAM,gCAAgC,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5D,QAAS,CAAAC,MAAMA,CAAA,CAAG,CAChB,KAAM,CAACC,KAAK,CAAC,CAAGV,QAAQ,CAACW,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAI,EAAE,CAAC,CAC7D,KAAM,CAAEC,eAAgB,CAAC,CAAGT,eAAe,CAAC,CAAC,CAC7C,KAAM,CAAAU,OAAO,CAAGb,UAAU,CAAC,CAAC,CAE5B,cAAe,CAAAc,WAAWA,CAACC,GAAG,CAAE,CAC9B,GAAI,CAAAC,OAAO,CAAG,SAAS,CAEvB,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAE/B,KAAM,CAAAC,WAAW,CAAG,KAAM,CAAAC,MAAM,CAACC,IAAI,CAACN,GAAG,CAAC,CAACO,OAAO,CAAEC,GAAG,EAAK,CAC1D,GAAIA,GAAG,GAAK,QAAQ,CAAE,CACpB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGT,GAAG,CAACQ,GAAG,CAAC,CAACE,MAAM,CAAED,CAAC,EAAE,CAAE,CACxCP,QAAQ,CAACS,MAAM,UAAWX,GAAG,CAACQ,GAAG,CAAC,CAACC,CAAC,CAAC,CAAC,CACxC,CACF,CAAC,IAAM,CACLP,QAAQ,CAACS,MAAM,CAACH,GAAG,CAAER,GAAG,CAACQ,GAAG,CAAC,CAAC,CAChC,CACF,CAAC,CAAC,CAEFN,QAAQ,CAACS,MAAM,CAAC,KAAK,CAAEP,WAAW,CAAC,CAEnC,KAAM,CAAAQ,IAAI,CAAG,KAAM,CAAA7B,GAAG,CACnB8B,IAAI,eAAgBX,QAAQ,CAAE,CAC7BY,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYC,IAAI,CAACC,KAAK,CAACxB,KAAK,CAAC,CAAE,CAC5C,cAAc,CAAE,qBAClB,CACF,CAAC,CAAC,CACDyB,IAAI,CAAEC,QAAQ,EAAK,CAClBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACR,IAAI,CAAC,CAC1B,MAAO,CAAAQ,QAAQ,CAACR,IAAI,CACtB,CAAC,CAAC,CACDW,KAAK,CAAEC,GAAG,EAAK,CACdH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC,CAChBvB,OAAO,CAAG,OAAO,CACjB,MAAO,CAAAuB,GAAG,CAACJ,QAAQ,CAACR,IAAI,CAC1B,CAAC,CAAC,CAEJf,eAAe,CAACe,IAAI,CAACa,OAAO,CAAExB,OAAO,CAAC,CACtCH,OAAO,CAAC4B,IAAI,CAAC,aAAa,CAAC,CAC7B,CAEA,mBACElC,KAAA,YAAAmC,QAAA,eACEnC,KAAA,QAAKoC,SAAS,CAAE1C,MAAM,CAAC2C,aAAc,CAAAF,QAAA,eACnCrC,IAAA,OAAAqC,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBrC,IAAA,MAAAqC,QAAA,CAAG,sDAAwC,CAAG,CAAC,EAC5C,CAAC,cACNrC,IAAA,CAACH,OAAO,EAAC2C,YAAY,CAAE/B,WAAY,CAACgC,OAAO,CAAC,WAAW,CAAE,CAAC,EACnD,CAAC,CAEd,CAEA,cAAe,CAAAtC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}